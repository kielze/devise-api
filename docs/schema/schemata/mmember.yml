---
"$schema": http://json-schema.org/draft-04/hyper-schema
title: User Parameter
description: mmemberのスキーマを定義
id: schemata/user
stability: prototype
strictProperties: true
type:
- object

definitions:
  id:
    description: unique identifier of user
    example: 1
    readOnly: true
    type:
    - integer
  authenticity_token:
    description: 認証トークン
    readOnly: true
    type:
    - string
  email:
    description: email address
    format: email
    readOnly: true
    type:
    - string
  password:
    description: password
    readOnly: true
    type:
    - string
  password_confirmation:
    description:   password confirmation
    readOnly: true
    type:
    - string
  remember_me:
    description: ログイン記憶
    readOnly: true
    type:
    - string
  commit:
    description: commit
    example: メールアドレス変更
    readOnly: true
    type:
    - string
  service:
    description: どのツールか
    readOnly: true
    type:
    - "null"
    - integer

# DEVISEに従ったRouting
links:
- description: user_session
  href: "/users/sign_in"
  method: POST
  rel: create
  schema:
    properties:
      authenticity_token:
        "$ref": "/schemata/user#/definitions/authenticity_token"
      email:
        "$ref": "/schemata/user#/definitions/email"
      password:
        "$ref": "/schemata/user#/definitions/password"
      remember_me:
        "$ref": "/schemata/user#/definitions/remember_me"
    required: ["authenticity_token", "email", "password"]
    type:
    - object
  title: Create

- description: user_password
  href: "/users/password"
  method: POST
  rel: create
  schema:
    properties:
      authenticity_token:
        "$ref": "/schemata/user#/definitions/authenticity_token"
      email:
        "$ref": "/schemata/user#/definitions/email"
      password:
        "$ref": "/schemata/user#/definitions/password"
      password_confirmation:
        "$ref": "/schemata/user#/definitions/password_confirmation"
    required: ["authenticity_token", "email", "password", "password_confirmation"]
    type:
    - object
  title: Create

- description: edit_user_password update
  href: "/users/password"
  method: PATCH
  rel: update
  schema:
    properties:
      authenticity_token:
        "$ref": "/schemata/user#/definitions/authenticity_token"
      email:
        "$ref": "/schemata/user#/definitions/email"
      password:
        "$ref": "/schemata/user#/definitions/password"
      password_confirmation:
        "$ref": "/schemata/user#/definitions/password_confirmation"
    required: ["authenticity_token", "email", "password", "password_confirmation"]
    type:
    - object
  title: Update

- description: edit_user_password update
  href: "/users/password"
  method: PUT
  rel: update
  schema:
    properties:
      authenticity_token:
        "$ref": "/schemata/user#/definitions/authenticity_token"
      email:
        "$ref": "/schemata/user#/definitions/email"
      password:
        "$ref": "/schemata/user#/definitions/password"
      password_confirmation:
        "$ref": "/schemata/user#/definitions/password_confirmation"
    required: ["authenticity_token", "email", "password", "password_confirmation"]
    type:
    - object
  title: Update

- description: user_registration create
  href: "/users"
  method: POST
  rel: create
  schema:
    properties:
      authenticity_token:
        "$ref": "/schemata/user#/definitions/authenticity_token"
      email:
        "$ref": "/schemata/user#/definitions/email"
      password:
        "$ref": "/schemata/user#/definitions/password"
      service:
        "$ref": "/schemata/user#/definitions/service"
    required: ["authenticity_token", "email", "password", "service"]
    type:
    - object
  title: Create

- description: edit_user_registration update
  href: "/users"
  method: PATCH
  rel: update
  schema:
    properties:
      authenticity_token:
        "$ref": "/schemata/user#/definitions/authenticity_token"
      email:
        "$ref": "/schemata/user#/definitions/email"
      commit:
        "$ref": "/schemata/user#/definitions/commit"
    required: ["authenticity_token", "email"]
    type:
    - object
  title: Update

- description: edit_user_registration update
  href: "/users"
  method: PUT
  rel: update
  schema:
    properties:
      authenticity_token:
        "$ref": "/schemata/user#/definitions/authenticity_token"
      email:
        "$ref": "/schemata/user#/definitions/email"
      commit:
        "$ref": "/schemata/user#/definitions/commit"
    required: ["authenticity_token", "email"]
    type:
    - object
  title: Update

properties:
  id:
    "$ref": "/schemata/user#/definitions/id"
  authenticity_token:
    "$ref": "/schemata/user#/definitions/authenticity_token"
  email:
    "$ref": "/schemata/user#/definitions/email"
  password:
    "$ref": "/schemata/user#/definitions/password"
  password_confirmation:
    "$ref": "/schemata/user#/definitions/password_confirmation"
  remember_me:
    "$ref": "/schemata/user#/definitions/remember_me"
  commit:
    "$ref": "/schemata/user#/definitions/commit"
  service:
    "$ref": "/schemata/user#/definitions/service"
